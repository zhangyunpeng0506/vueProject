<!DOCTYPE html>
<html>
  <head>
    <meta charset='UTF-8'>
    <title>ES6——数组</title>
  </head>
  <body>
    <p>ES5及之前版本数组方法：</p>
    <ul>
      <li>toString() 把数组转换为字符串，并返回结果。 不改变原数组</li>
      <li>valueOf() 返回数组对象的原始值。 不改变原数组</li>
      <li>push() 向数组的末尾添加一个或多个元素，并返回长度。 改变原数组</li>
      <li>unshift() 向数组的开头添加一个或多个元素，并返回长度。 改变原数组</li>
      <li>pop() 删除并返回数组最后一个元素。 改变原数组</li>
      <li>shift() 删除并返回数组第一个元素。 改变原数组</li>
      <li>sort() 对数组元素排序。 改变原数组</li>
      <li>reverse() 颠倒数组元素顺序。 改变原数组</li>
      <li>splice() 删除并向数组添加新的元素，返回删除的数组。 改变原数组</li>
      <li>concat() 连接两个或多个数组。 不改变原数组</li>
      <li>join() 将数组元素用指定分隔符分隔放入字符串。 不改变原数组</li>
      <li>slice(start,end) 从数组返回指定元素，可以传负数。 不改变原数组</li>
    </ul>
    <p>ES5新增数组：</p>
    <ul>
      <li>索引方法：indexOf(val,start)：返回第一个符合的元素索引、lastIndexOf(val,start)：返回最后一个符合的元素索引</li>
      <li>迭代方法：forEach()、map()、filter()、some()、every()</li>
      <li>归并方法：reduce()、reduceRight()</li>
      <li>数组方法：isArray() （使用方式：Array.isArray(arr)）</li>
    </ul>
    </ul>
    <p>ES6数组方法：</p>
    <ul>
      <li>Array.from(arraylike,fn) </li>
      <li>Array.of()</li>
      <li>copyWithin(target,start,end)  将从target开始的值换成start到end位置的值，替换后整体的数组长度不变</li>
      <li>fill(value,start,end) 替换后整体的数组长度不变</li>
      <li>find(x=>{ return }) 高阶函数</li>
      <li>findIndex(x=>{ return })  高阶函数</li>
      <li>flat()  //嵌套数组转一维数组</li>
      <li>flatMap()   //先对数组中每个元素做了处理，再对数组进行flat()方法</li>
      <li>includes()</li>
      <li>entries()、keys()、values()</li>
    </ul>

    <script>
      let arr=[1,2,3];
      console.log(arr.toString());
      console.log(arr.valueOf());
      console.log(arr.includes(2));

      let arr2=[34,54,76,7,78,78,89,21,65,97];
      arr2 = arr2.concat(Array.of(98));  //concat方法不改变原数组
      arr2.push(...Array.of(99,100));
      arr2.fill(61,0,1);
      arr2.copyWithin(1,2,3); //将索引是1的元素替换成索引为2的元素
      console.log(arr2);
      console.log(arr2.map(curVal=>curVal<60?'不及格':(curVal<80?'及格':(curVal<90?'良好':'优秀'))));  //映射
      console.log(arr2.reduce((prev,cur)=>prev+cur)/arr2.length); //汇总
      console.log(arr2.reduce((prev,cur,curIndex,ary)=>{
        if(curIndex===ary.length-1){
          return (prev+cur)/ary.length;
        }else{
          return prev+cur;
        }
      }));
      console.log(arr2.filter(cur=>cur>60));  //过滤

      console.log(arr2.findIndex(item=>item===78)); //返回第一个符合条件的
      
      console.log(arr2.find(item=>item>60));  //返回第一个符合条件的

      [2,3,[4,5]].flat()  //[2,3,4,5]
      // 指定转换的嵌套层数
      [1,[2,[3,[4,5]]]].flat(2) //[1,2,3,[4,5]]
      // 不管嵌套多少层
      [1,[2,[3,[4,5]]]].flat(Infinity)  //[1,2,3,4,5]
      // 自动跳过空格
      [1,[2,,3]].flat() //[1,2,3]
      
    </script>
  </body>
</html>